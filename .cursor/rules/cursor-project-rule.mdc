---
alwaysApply: true
---
# Cursor Project Rule

**Applies to:** this repository and all Cursor-generated changes.

## Purpose

Guarantee every feature is designed and implemented using the official references for:

* **Vercel AI SDK V5 (Core)** — `https://ai-sdk.dev/docs/introduction`
* **AI Elements** — `https://ai-sdk.dev/elements/overview`
* **Vercel AI Gateway** — `https://vercel.com/docs/ai-gateway`
* **Supabase (Backend & Storage/Auth/DB/Edge Functions)** — `https://supabase.com/docs`

## Non‑negotiable Rules

1. **Always consult docs first.** Before writing code or UI, read the relevant sections of the four docs above. Prefer the **latest, canonical examples** from these pages.
2. **Cite sources inline.** In every PR description and major file header, include a short “References” block with exact doc section URLs used for that change.
3. **Use the official patterns.**

   * AI calls must use **Vercel AI SDK V5 (Core)** idioms (streaming, tool calling, providers) and **AI Gateway** for routing/observability.
   * UI must use **AI Elements** components when building chat/assistants, rather than custom re‑implementations.
   * All backend data, auth, storage, RLS, and edge functions must use **Supabase** clients and recommended patterns.
4. **No ad‑hoc providers or unvetted libs.** If a feature needs a new model/provider, it must go through AI Gateway and follow AI SDK docs.
5. **Type safety & envs.** Strong TypeScript types, zod (or equivalent) for I/O boundaries, and `env` variables managed via `.env.local` with typed access.
6. This project must use **Vercel AI SDK V5 versioning ONLY. DO NOT USE LOWER VERSIONS.
7. This will be build in vercel se pay attention to potential typescripts errors and eslint errors.

## Definition of Done (per task)

* [ ] **Design note** links to the exact doc sections used.
* [ ] **API client** created/updated using AI SDK Core examples.
* [ ] **UI** built with AI Elements where applicable.
* [ ] **AI Gateway** config added (routes/keys/observability) as per docs.
* [ ] **Supabase**: schema, RLS, auth flow, and queries implemented by copying/adapting official examples.
* [ ] **References** block in PR (copy/paste template below).
* [ ] **Smoke test** steps included.

## File Header Template (paste at top of new/edited files)

```md
/**
 * Feature: <short title>
 * Purpose: <what this file does>
 * References:
 *  - AI SDK Core: https://ai-sdk.dev/docs/introduction#<section>
 *  - AI Elements: https://ai-sdk.dev/elements/overview#<section>
 *  - Vercel AI Gateway: https://vercel.com/docs/ai-gateway#<section>
 *  - Supabase: https://supabase.com/docs/<product>/<section>
 */
```

## PR Description Template

```
### What & Why
<1–3 sentences>

### Implementation Notes
- Followed AI SDK Core pattern for <streaming/tool calling/etc>.
- Used AI Elements <ComponentName> for <chat/input/history>.
- Routed model traffic via AI Gateway <config link/notes>.
- Supabase <auth/storage/db> per docs <links>.

### References
- AI SDK Core: <exact section URL>
- AI Elements: <exact section URL>
- AI Gateway: <exact section URL>
- Supabase: <exact section URL>

### Test Plan
1) <steps>
2) <expected output>
```

## Enforcement

* Cursor: Always expand the **References** block before proposing code.
* If a suggestion contradicts the linked docs, prefer the docs and note the discrepancy.
* When docs show multiple options, choose the simplest **official** path first.
* Cursor has access to Supabase via MCP, so it can execute/check on behalf of us instead of asking.

## Quick Links

* AI SDK Core — [https://ai-sdk.dev/docs/introduction](https://ai-sdk.dev/docs/introduction)
* AI Elements — [https://ai-sdk.dev/elements/overview](https://ai-sdk.dev/elements/overview)
* Vercel AI Gateway — [https://vercel.com/docs/ai-gateway](https://vercel.com/docs/ai-gateway)
* Supabase — [https://supabase.com/docs](https://supabase.com/docs)
